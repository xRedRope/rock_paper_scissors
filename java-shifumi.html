<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <div class="game">
            <button id="paper" type = "button">Paper</button>
            <button id="rock" type="button">Rock</button>
            <button id="scissors" type="button">Scissors</button>
        </div>
        <div class="result"></div>
    </body>


    <script>

        let computerPoints = 0;
        let playerPoints = 0;

        // Genere un nombre entier aléatoire compris entre min et max inclus!
        function entierAleatoire(min, max){
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Choix aléatoire de l'ordinateur de
        function computerPlay(){
            let computerChoice = entierAleatoire(1, 3);
            if (computerChoice === 1) {
                return "rock";
            } else if (computerChoice === 2) {
                return "paper";
            } else return "scissors";
        }

        function playerPlay() {
            while (true) {
            playerSelection = prompt("Rock, Paper or Scissors ?");
            playerSelection = playerSelection.toLowerCase();
            if (playerSelection === "rock") return(playerSelection);
            if (playerSelection === "paper") return(playerSelection);
            if (playerSelection === "scissors") return(playerSelection);
            }
        }

        // simule un tour de shifumi
        function playRound(computerSelection, playerSelection) {
            // l'ordinateur et le joueur choisissent leur element
           
            let result = "";
            
         
            if ((computerSelection === "rock") && (playerSelection === "paper")){
                playerPoints++;
                return (result = "You win ! " + playerSelection + " beats " + computerSelection + "!");

            } else if ((computerSelection === "paper") && (playerSelection === "scissors")){
                playerPoints++;
                return (result = "You win ! " + playerSelection + " beats " + computerSelection + "!");
            } else if ((computerSelection === "scissors") && (playerSelection === "rock")){
                playerPoints++;
                return (result = "You win ! " + playerSelection + " beats " + computerSelection + "!");
            } else if ((computerSelection === "rock") && (playerSelection === "scissors")){
                computerPoints++;
                return (result = "You loose ! " + computerSelection + " beats " + playerSelection + "!");
            } else if ((computerSelection === "paper") && (playerSelection === "rock")){
                computerPoints++;
                return (result = "You loose ! " + computerSelection + " beats " + playerSelection + "!");
            } else if ((computerSelection === "scissors") && (playerSelection === "paper")){
                computerPoints++;
                return (result = "You loose ! " + computerSelection + " beats " + playerSelection + "!");
            } else return (result = "It's a draw ! The both of you played " + computerSelection);

            return result;
        }
      
       
        const buttons = document.querySelectorAll("button");
        const result = document.querySelector(".result");

    
        buttons.forEach((button) => {
            button.addEventListener('click', (e) => {
                const computerResult = document.createElement("p");
                const playerResult = document.createElement("p");
                console.log(button.id);
                //console.log(playRound(computerPlay(), button.id));
                playRound(computerPlay(), button.id);
                console.log(computerPoints, playerPoints);
              
                computerResult.textContent = "Computer : " + computerPoints;
                playerResult.textContent = "Player : " + playerPoints;
                result.innerHTML = '';
                  
                result.appendChild(computerResult);
                result.appendChild(playerResult);
                if ((computerPoints >= 5) || (playerPoints >= 5)){
                    if (playerPoints > computerPoints){
                        
                        alert("The game is finished ! You win\n" + "Player : " + playerPoints + 
                        "\nComputer : " + computerPoints);
                    } else if (playerPoints < computerPoints) {
                       
                        alert("The game is finished ! You loose\n" + "Player : " + playerPoints + 
                        "\nComputer : " + computerPoints);
                    }
                    
                    computerPoints = 0;
                    playerPoints = 0;

                }
            })
        })
    
       

    </script>
</html>